
/* Mode/Inq page data */
struct vscsi_rom_page {
	int num;
	unsigned char *data;
	int size;
};

#define VSCSI_ROM_PAGE(n,p) { n, p, sizeof(p) }

struct vscsi_rom {
        char *name;
	char *rev;
	struct vscsi_rom_page std;
	struct vscsi_rom_page *vpd;
	struct vscsi_rom_page *mode;
};

/*
 * Disk pages
*/

/* Standard Inquiry page */
static unsigned char disk_std_page[] = {
	0x00,0x00,0x05,0x02,0x5c,0x00,0x01,0x20,	/* 00 - 07 */
	0x63,0x6f,0x4c,0x69,0x6e,0x75,0x78,0x00,	/* 08 - 15 */
	0x43,0x4f,0x44,0x49,0x53,0x4b,0x00,0x00,	/* 16 - 23 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 24 - 31 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 32 - 39 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 40 - 47 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 48 - 55 */
	0x00,0x00,0x00,0x77,0x00,0x14,0x03,0x3d,	/* 56 - 63 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 64 - 71 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 72 - 79 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 80 - 87 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 88 - 95 */
};

/* Supported VPD Pages */
static unsigned char disk_vpd_00[] = {
	0x00,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x00,						/* PAGE CODE */
	0x00,						/* Reserved */
	0x03,						/* PAGE LENGTH */
	0x00,						/* PAGE: 00h - Supported VPD Pages */
	0x80,						/* PAGE: 80h - Unit Serial Number */
	0x83,						/* PAGE: 83h - Device Identification */
};

/* Unit Serial Number VPD page */
static unsigned char disk_vpd_80[] = {
	0x00,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x80,						/* PAGE CODE */
	0x00,						/* Reserved */
	0x08,						/* PAGE LENGTH */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00		/* PRODUCT SERIAL NUMBER */
};

/* Device Identification VPD page */
static unsigned char disk_vpd_83[] = {
	0x00,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x83,						/* PAGE CODE */
	0x00,						/* PAGE LENGTH (MSB) */
	0x0C,						/* PAGE LENGTH (LSB) */

	/* Designator descriptor */
	0x01 << 4, 					/* Protocol + code set */
	1 << 7 | 0x03, 					/* PIV | Reserved | ASSOCIATION | DESIGNATOR TYPE */
	0x00,						/* Reserved */
	0x08,						/* Designator length */

	/* Designator */
	0x03 << 4,					/* Locally Assigned */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00		/* Filled in by driver */
};

static struct vscsi_rom_page disk_vpd_pages[] = {
	VSCSI_ROM_PAGE(0x00, disk_vpd_00),
	VSCSI_ROM_PAGE(0x80, disk_vpd_80),
	VSCSI_ROM_PAGE(0x83, disk_vpd_83),
	{ 0, 0, 0 }
};

static unsigned char disk_mode_08[] = {
	0x08, 0x12, 0x14, 0x00, 0xff, 0xff, 0x00, 0x00,
	0xff, 0xff, 0xff, 0xff, 0x80, 0x14, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00
};

static struct vscsi_rom_page disk_mode_pages[] = {
	VSCSI_ROM_PAGE(0x08, disk_mode_08),
	{ 0, 0, 0 }
};

static struct vscsi_rom disk_rom = {
	.name =		"VDISK",
	.rev =		"1.00",
	.std =		VSCSI_ROM_PAGE(0, disk_std_page),
	.vpd =		disk_vpd_pages,
	.mode =		disk_mode_pages,
};

/*
 * CD pages
*/

static unsigned char cd_std_page[] = {
	0x05,0x80,0x02,0x02,0x1f,0x00,0x00,0x10,	/* 00 - 07 */
	0x4f,0x50,0x30,0x34,0x32,0x5a,0x20,0x49,	/* 08 - 15 */
	0x52,0x53,0x30,0x36,0x50,0x20,0x20,0x20,	/* 16 - 23 */
	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,	/* 24 - 31 */
	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,	/* 24 - 31 */
	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,	/* 32 - 39 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 40 - 47 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 48 - 55 */
	0x00,0x00,0x00,0x77,0x00,0x14,0x03,0x3d,	/* 56 - 63 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 64 - 71 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 72 - 79 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 80 - 87 */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	/* 88 - 95 */
};

/* Supported VPD Pages */
static unsigned char cd_vpd_00[] = {
	0x00,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x00,						/* PAGE CODE */
	0x00,						/* Reserved */
	0x03,						/* PAGE LENGTH */
	0x00,						/* PAGE: 00h - Supported VPD Pages */
	0x80,						/* PAGE: 80h - Unit Serial Number */
	0x83,						/* PAGE: 83h - Device Identification */
};

/* Unit Serial Number VPD page */
static unsigned char cd_vpd_80[] = {
	0x00,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x80,						/* PAGE CODE */
	0x00,						/* Reserved */
	0x08,						/* PAGE LENGTH */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00		/* PRODUCT SERIAL NUMBER */
};

/* Device Identification VPD page */
static unsigned char cd_vpd_83[] = {
	0x05,						/* PERIPHERAL QUALIFIER | PERIPHERAL DEVICE TYPE */
	0x83,						/* PAGE CODE */
	0x00,						/* PAGE LENGTH (MSB) */
	0x0C,						/* PAGE LENGTH (LSB) */

	/* Designator descriptor */
	0x01 << 4, 					/* Protocol + code set */
	1 << 7 | 0x03, 					/* PIV | Reserved | ASSOCIATION | DESIGNATOR TYPE */
	0x00,						/* Reserved */
	0x08,						/* Designator length */

	/* Designator */
	0x03 << 4,					/* Locally Assigned */
	0x00,0x00,0x00,0x00,0x00,0x00,0x00		/* Filled in by driver */
};

static struct vscsi_rom_page cd_vpd_pages[] = {
	VSCSI_ROM_PAGE(0x00, cd_vpd_00),
	VSCSI_ROM_PAGE(0x80, cd_vpd_80),
	VSCSI_ROM_PAGE(0x83, cd_vpd_83),
	{ 0, 0, 0 }
};

unsigned char cd_mode_2a[] = {
	0x2a,0x18,0x3f,0x00,0x75,0x7f,0x29,0x00, 	/* 00 - 07 */
	0x16,0x00,0x01,0x00,0x02,0x00,0x16,0x00,	/* 08 - 15 */
	0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x01,	/* 16 - 23 */
};

static struct vscsi_rom_page cd_mode_pages[] = {
	VSCSI_ROM_PAGE(0x2a, cd_mode_2a),
	{ 0, 0, 0 }
};

static struct vscsi_rom cd_rom = {
	.name =		"VCD",
	.rev =		"1.00",
	.std =		VSCSI_ROM_PAGE(0, cd_std_page),
	.vpd = 		cd_vpd_pages,
	.mode =		cd_mode_pages,
};
